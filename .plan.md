# drewsky CLI - Implementation Plan

**Created**: 2025-12-08
**Package Name**: `drewsky`
**Target**: npm registry
**Status**: Ready to build

---

## Task Ledger (Strategic)

### Facts (Verified)
- ‚úì Package name `drewsky` is available on npm (verified: npm view drewsky)
- ‚úì Node.js CLI tools use Commander.js pattern (industry standard)
- ‚úì Framework docs exist in `docs/core/` (verified: 6 files)
- ‚úì Templates needed for init, research, plan commands
- ‚úì npm account required for publishing
- ‚úì Current framework = RPI (needs rebranding to drewsky)

### Guesses (Need Validation)
- ? Users will want interactive prompts vs flag-based commands
- ? Metrics tracking should be local JSON vs remote analytics
- ? CLI should work standalone vs require Claude Code installed

### Decision Points
- [x] **Package name**: `drewsky` (decided)
- [x] **Starting version**: `0.1.0` (beta, iterate fast)
- [ ] **Command style**: Interactive prompts (recommended) vs flags only
- [ ] **Storage**: Local `.drewsky/` directory (recommended) vs global config
- [ ] **AI integration**: Phase 2 feature, not MVP

---

## Progress Ledger (Tactical Implementation)

### Phase 1: Rebrand Framework (Prerequisites)

#### Step 1.1: Rebrand Documentation Files
**Input**: All markdown files with "RPI" references
**Action**: Find/replace RPI ‚Üí drewsky in all docs
**Output**: Updated documentation
**Verification**: `grep -r "RPI" docs/` returns no matches
**Confidence**: 95%
**Time**: 20 minutes

**Files to update**:
- README.md
- docs/core/ENFORCED_RPI_PROTOCOL.md ‚Üí ENFORCED_DREWSKY_PROTOCOL.md
- docs/core/RPI_FRAMEWORK_SETUP_GUIDE.md ‚Üí DREWSKY_FRAMEWORK_SETUP_GUIDE.md
- docs/core/RPI_STATUS.md ‚Üí DREWSKY_STATUS.md
- docs/core/OPERATIONAL_LOGIC_INTEGRATION.md
- docs/core/V2_INTEGRATION_SUMMARY.md
- docs/core/instructions.md

#### Step 1.2: Rebrand Slash Commands
**Input**: `.claude/commands/*.md` files
**Action**: Update command names and content
**Output**: drewsky-prefixed commands
**Verification**: All commands reference drewsky, not RPI
**Confidence**: 95%
**Time**: 15 minutes

**Files to update**:
- rpi-init.md ‚Üí drewsky-init.md
- rpi-help.md ‚Üí drewsky-help.md
- rpi-status.md ‚Üí drewsky-status.md
- rpi-enforce.md ‚Üí drewsky-enforce.md
- Other commands (tcrei.md, maker.md, verify.md, plan.md remain as-is - they're methodologies)

#### Step 1.3: Update Claude Settings Hook
**Input**: `.claude/settings.local.json.example`
**Action**: Replace RPI ‚Üí drewsky in hook prompt
**Output**: Updated auto-activation hook
**Verification**: Hook mentions drewsky framework
**Confidence**: 100%
**Time**: 5 minutes

#### Step 1.4: Commit Rebrand to GitHub
**Input**: All updated files
**Action**: Git commit with clear rebrand message
**Output**: GitHub repo reflects drewsky brand
**Verification**: Pushed to main successfully
**Confidence**: 100%
**Time**: 10 minutes

**Commit message**:
```
Rebrand: RPI Framework ‚Üí drewsky

Major rebrand to establish unique identity and prepare for npm CLI tool.

Changes:
- RPI ‚Üí drewsky in all documentation
- Renamed core protocol files
- Updated slash commands (drewsky-init, drewsky-help, etc.)
- Updated Claude Code hook to drewsky terminology
- Maintained methodology names (TCREI, MAKER, CoVe remain)

Rationale: "drewsky" is unique, memorable, brandable, and
available on npm. Sets foundation for drewsky CLI tool launch.

ü§ñ Generated with Claude Code (https://claude.com/claude-code)

Co-Authored-By: Claude Sonnet 4.5 <noreply@anthropic.com>
```

**Time**: 10 minutes

---

### Phase 2: Build drewsky CLI Package

#### Step 2.1: Initialize npm Package Structure
**Input**: Clean directory for CLI project
**Action**: Create package structure with proper directories
**Output**: `drewsky-cli/` directory with scaffold
**Verification**: Directory structure matches plan
**Confidence**: 100%
**Time**: 15 minutes

**Structure**:
```
drewsky-cli/
‚îú‚îÄ‚îÄ package.json
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ LICENSE (MIT)
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ bin/
‚îÇ   ‚îî‚îÄ‚îÄ drewsky.js         # Executable entry point
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ index.js           # Main CLI logic
‚îÇ   ‚îú‚îÄ‚îÄ commands/          # Command implementations
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ init.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ research.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plan.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ verify.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ metrics.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ status.js
‚îÇ   ‚îú‚îÄ‚îÄ templates/         # Document templates
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ research.template.md
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ plan.template.md
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ completion.template.md
‚îÇ   ‚îî‚îÄ‚îÄ utils/            # Helper functions
‚îÇ       ‚îú‚îÄ‚îÄ tcrei.js
‚îÇ       ‚îú‚îÄ‚îÄ file-helpers.js
‚îÇ       ‚îî‚îÄ‚îÄ prompts.js
‚îî‚îÄ‚îÄ tests/
    ‚îî‚îÄ‚îÄ commands.test.js
```

#### Step 2.2: Create package.json
**Input**: Package requirements
**Action**: Define package metadata, dependencies, bin entry
**Output**: Valid package.json
**Verification**: `npm install` succeeds
**Confidence**: 100%
**Time**: 10 minutes

**package.json**:
```json
{
  "name": "drewsky",
  "version": "0.1.0",
  "description": "CLI tool for the drewsky AI collaboration framework - Research ‚Üí Plan ‚Üí Implement with built-in validation",
  "main": "src/index.js",
  "bin": {
    "drewsky": "./bin/drewsky.js"
  },
  "keywords": [
    "ai",
    "claude",
    "prompt-engineering",
    "workflow",
    "productivity",
    "cli",
    "tcrei",
    "verification"
  ],
  "author": "Drew Beyersdorf",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/drewbeyersdorf/agent-improvement-techniques"
  },
  "engines": {
    "node": ">=18.0.0"
  },
  "dependencies": {
    "commander": "^11.1.0",
    "inquirer": "^9.2.12",
    "chalk": "^5.3.0",
    "ora": "^7.0.1",
    "boxen": "^7.1.1",
    "fs-extra": "^11.2.0"
  },
  "devDependencies": {
    "vitest": "^1.0.4"
  },
  "scripts": {
    "test": "vitest",
    "start": "node bin/drewsky.js"
  }
}
```

#### Step 2.3: Build Core Commands - init
**Input**: Template files, package structure
**Action**: Implement `drewsky init` command
**Output**: Working init command that creates `.drewsky/` structure
**Verification**: Run `drewsky init test-project` and verify files created
**Confidence**: 90%
**Time**: 45 minutes

**Features**:
- Creates `.drewsky/` directory
- Copies template files
- Initializes `metrics.json`
- Creates `config.json`
- Shows success message with next steps

**Code snippet** (bin/drewsky.js):
```javascript
#!/usr/bin/env node

import { Command } from 'commander';
import chalk from 'chalk';
import { initCommand } from '../src/commands/init.js';
import { researchCommand } from '../src/commands/research.js';
import { planCommand } from '../src/commands/plan.js';
import { statusCommand } from '../src/commands/status.js';
import { metricsCommand } from '../src/commands/metrics.js';
import { verifyCommand } from '../src/commands/verify.js';

const program = new Command();

program
  .name('drewsky')
  .description('drewsky AI collaboration framework - Research ‚Üí Plan ‚Üí Implement')
  .version('0.1.0');

program
  .command('init [project-name]')
  .description('Initialize drewsky framework in a project')
  .action(initCommand);

program
  .command('research <task>')
  .description('Create research document with TCREI validation')
  .action(researchCommand);

program
  .command('plan')
  .option('--from-research', 'Generate plan from existing research')
  .description('Generate implementation plan with Task/Progress Ledgers')
  .action(planCommand);

program
  .command('status')
  .description('Show current workflow state')
  .action(statusCommand);

program
  .command('metrics')
  .description('Show productivity and token savings stats')
  .action(metricsCommand);

program
  .command('verify <file>')
  .description('Run Chain of Verification on file claims')
  .action(verifyCommand);

program.parse(process.argv);
```

#### Step 2.4: Build Core Commands - research
**Input**: User task description
**Action**: Interactive TCREI prompts ‚Üí generate .research.md
**Output**: Structured research document
**Verification**: Generated .research.md contains all TCREI elements
**Confidence**: 85%
**Time**: 60 minutes

**Features**:
- Interactive prompts using Inquirer
- Validates all TCREI fields filled
- Generates formatted .research.md
- Adds timestamp and placeholders
- Updates metrics.json

**Code snippet** (src/commands/research.js):
```javascript
import inquirer from 'inquirer';
import chalk from 'chalk';
import fs from 'fs-extra';
import { validateTCREI, generateResearchDoc } from '../utils/tcrei.js';

export async function researchCommand(task) {
  console.log(chalk.blue.bold('\nüîç drewsky Research - TCREI Validation\n'));

  const answers = await inquirer.prompt([
    {
      type: 'input',
      name: 'task',
      message: 'Task: What exactly needs to be done?',
      default: task
    },
    {
      type: 'input',
      name: 'context',
      message: 'Context: Why is this needed?',
      validate: (input) => input.length > 0 || 'Context is required'
    },
    {
      type: 'input',
      name: 'reference',
      message: 'Reference: Any examples or patterns to follow?',
      default: 'None'
    },
    {
      type: 'input',
      name: 'evaluation',
      message: 'Evaluation: How will you measure success?',
      validate: (input) => input.length > 0 || 'Evaluation criteria required'
    },
    {
      type: 'input',
      name: 'input',
      message: 'Input: What files/data should be examined?',
      validate: (input) => input.length > 0 || 'Input requirements needed'
    }
  ]);

  const researchDoc = generateResearchDoc(answers);
  await fs.writeFile('.research.md', researchDoc);

  console.log(chalk.green('\n‚úÖ Research document created: .research.md\n'));
  console.log(chalk.gray('Next step: drewsky plan\n'));
}
```

#### Step 2.5: Build Core Commands - plan
**Input**: Optional .research.md file
**Action**: Generate .plan.md with Task/Progress Ledgers
**Output**: Structured plan document
**Verification**: Generated .plan.md has dual-loop structure
**Confidence**: 85%
**Time**: 60 minutes

**Features**:
- Reads .research.md if exists
- Prompts for Task Ledger (facts/guesses/decisions)
- Prompts for Progress Ledger (atomic steps)
- Generates formatted .plan.md
- Updates metrics

#### Step 2.6: Build Support Commands - status, metrics, verify
**Input**: `.drewsky/` directory state
**Action**: Implement remaining commands
**Output**: Working status, metrics, verify commands
**Verification**: Each command produces expected output
**Confidence**: 90%
**Time**: 45 minutes each = 135 minutes total

**status command**:
- Check for .research.md, .plan.md
- Show current phase
- Suggest next action

**metrics command**:
- Read metrics.json
- Display sessions, token savings, tasks completed
- Show confidence trends

**verify command**:
- Parse file for claims
- Prompt for verification sources
- Generate verification report
- Update confidence scores

#### Step 2.7: Create Template Files
**Input**: drewsky framework docs
**Action**: Create minimal, clean templates
**Output**: 3 template files
**Verification**: Templates are properly formatted markdown
**Confidence**: 100%
**Time**: 30 minutes

**Templates**:
1. `research.template.md` - TCREI structure
2. `plan.template.md` - Dual-loop ledgers
3. `completion.template.md` - Post-implementation summary

---

### Phase 3: Testing & Polish

#### Step 3.1: Write Tests
**Input**: All command implementations
**Action**: Write Vitest tests for each command
**Output**: Test suite with >80% coverage
**Verification**: `npm test` passes all tests
**Confidence**: 80%
**Time**: 90 minutes

**Test cases**:
- `drewsky init` creates correct structure
- `drewsky research` validates TCREI input
- `drewsky plan` generates proper format
- `drewsky status` detects workflow state
- `drewsky metrics` calculates correctly
- `drewsky verify` extracts claims

#### Step 3.2: Test Locally
**Input**: Built CLI package
**Action**: `npm link` and test all commands manually
**Output**: All commands work as expected
**Verification**: Can complete full workflow (init ‚Üí research ‚Üí plan)
**Confidence**: 90%
**Time**: 45 minutes

**Test workflow**:
```bash
npm link
mkdir test-project && cd test-project
drewsky init
drewsky research "Add user authentication"
# [Fill in TCREI prompts]
drewsky plan
drewsky status
drewsky metrics
```

#### Step 3.3: Create npm README
**Input**: Package features
**Action**: Write compelling README for npm page
**Output**: README.md with examples, installation, usage
**Verification**: Follows npm best practices
**Confidence**: 95%
**Time**: 45 minutes

**README sections**:
- Quick start (one command to get started)
- What problem it solves
- Installation (`npm install -g drewsky`)
- Usage examples
- Available commands
- Framework overview
- Links to full docs

#### Step 3.4: Add LICENSE
**Input**: MIT license template
**Action**: Create LICENSE file with MIT text
**Output**: LICENSE file
**Verification**: Standard MIT format
**Confidence**: 100%
**Time**: 5 minutes

---

### Phase 4: Publish to npm

#### Step 4.1: Create npm Account
**Input**: Email, username
**Action**: Sign up at npmjs.com if not already registered
**Output**: npm account credentials
**Verification**: Can login via `npm login`
**Confidence**: 100%
**Time**: 10 minutes

#### Step 4.2: Test npm Package Locally
**Input**: Complete package
**Action**: Run `npm pack` to test package creation
**Output**: drewsky-0.1.0.tgz file
**Verification**: Tarball contains all expected files
**Confidence**: 95%
**Time**: 15 minutes

**Commands**:
```bash
npm pack
tar -tzf drewsky-0.1.0.tgz
# Verify includes: bin/, src/, templates/, package.json, README.md, LICENSE
```

#### Step 4.3: Publish to npm
**Input**: Tested package, npm credentials
**Action**: `npm publish` to registry
**Output**: Package live on npmjs.com
**Verification**: Can install via `npm install -g drewsky`
**Confidence**: 90%
**Time**: 15 minutes

**Commands**:
```bash
npm login
npm publish
# Verify at https://www.npmjs.com/package/drewsky
```

#### Step 4.4: Test Published Package
**Input**: Published drewsky package
**Action**: Fresh install and test workflow
**Output**: Confirms package works globally
**Verification**: Can run `drewsky` commands from any directory
**Confidence**: 95%
**Time**: 20 minutes

**Commands**:
```bash
# On fresh machine or new terminal
npm install -g drewsky
drewsky --version  # Should show 0.1.0
drewsky --help     # Should show all commands
mkdir test && cd test
drewsky init
drewsky research "test task"
```

---

### Phase 5: Post-Launch

#### Step 5.1: Update GitHub with CLI Project
**Input**: drewsky-cli source code
**Action**: Add CLI directory to repo or create new repo
**Output**: Source code available on GitHub
**Verification**: Repo shows CLI code, links to npm
**Confidence**: 100%
**Time**: 20 minutes

**Options**:
- **A**: Add `cli/` directory to existing repo
- **B**: Create new `drewsky-cli` repo (recommended for separation)

#### Step 5.2: Update Main README
**Input**: Published CLI tool
**Action**: Add "Install drewsky CLI" section to framework README
**Output**: Updated README with CLI installation
**Verification**: README shows npm install command
**Confidence**: 100%
**Time**: 15 minutes

#### Step 5.3: Announce Launch
**Input**: Live npm package
**Action**: Post on social media, dev communities
**Output**: Initial users trying drewsky
**Verification**: npm download stats
**Confidence**: 90%
**Time**: 30 minutes

**Channels**:
- Twitter/X: "Just launched drewsky - CLI for AI collaboration"
- Reddit: r/ClaudeAI, r/programming
- Hacker News: Show HN post
- LinkedIn: Professional announcement

---

## Time Estimates

| Phase | Tasks | Time | Cumulative |
|-------|-------|------|------------|
| Phase 1: Rebrand | 4 steps | 50 min | 50 min |
| Phase 2: Build CLI | 7 steps | 365 min | 415 min (~7 hrs) |
| Phase 3: Testing | 4 steps | 185 min | 600 min (~10 hrs) |
| Phase 4: Publish | 4 steps | 60 min | 660 min (~11 hrs) |
| Phase 5: Post-Launch | 3 steps | 65 min | 725 min (~12 hrs) |

**Total Estimated Time**: 12 hours (1.5 days of focused work)

**MVP Timeline** (Phase 1-2 only): 7 hours
**Polish + Publish** (Phase 3-4): 4 hours
**Launch** (Phase 5): 1 hour

---

## Success Metrics

### MVP Success (After Phase 2)
- ‚úì `npm link` works locally
- ‚úì Can run `drewsky init`, `drewsky research`, `drewsky plan`
- ‚úì Generated files match expected format
- ‚úì Commands show helpful output

### Launch Success (After Phase 4)
- ‚úì Published to npm at `https://www.npmjs.com/package/drewsky`
- ‚úì Anyone can `npm install -g drewsky`
- ‚úì All 6 commands work globally
- ‚úì README clear and compelling

### Product Success (1 week post-launch)
- üéØ 50+ npm downloads
- üéØ 5+ GitHub stars
- üéØ 3+ user feedback/issues
- üéØ 1+ community mention (Twitter, Reddit, etc.)

### Business Success (1 month)
- üéØ 200+ npm downloads
- üéØ 20+ GitHub stars
- üéØ Email list started (drewsky Pro interest)
- üéØ First paying customer for Pro version

---

## Risk Mitigation

| Risk | Likelihood | Impact | Mitigation |
|------|-----------|--------|----------|
| npm publish fails | Low | High | Test with `npm pack` first, verify credentials |
| Package name conflict | Low | Medium | Already verified `drewsky` available |
| Node version compatibility | Medium | Medium | Set `engines` in package.json, test on Node 18+ |
| User confusion on usage | Medium | High | Excellent README, `--help` text, examples |
| Low adoption | High | Medium | Post-launch marketing plan (Phase 5) |
| Bugs in commands | Medium | High | Comprehensive testing (Phase 3) |

---

## Next Actions

**Immediate (Today)**:
1. ‚úÖ Get user approval on this plan
2. ‚è≥ Execute Phase 1: Rebrand (50 minutes)
3. ‚è≥ Execute Phase 2.1-2.2: Package scaffold (25 minutes)

**This Week**:
4. Execute Phase 2.3-2.7: Build all commands (6 hours)
5. Execute Phase 3: Testing (3 hours)
6. Execute Phase 4: Publish to npm (1 hour)

**Next Week**:
7. Execute Phase 5: Post-launch marketing
8. Gather user feedback
9. Plan drewsky v0.2.0 improvements

---

**Plan Status**: Ready for approval and execution
**Overall Confidence**: 87%
**Estimated Success Probability**: 92%

Ready to build? Approve this plan and I'll start with Phase 1: Rebrand! üöÄ
